# 计算机组成与体系结构

*上午 6分*

  ## 数据的表示

  #### 2.02 进制

  > 注：十六进制 A，B，C，D，E，F（字母不区分大小写）这六个字母来分别表示10，11，12，13，14，15
  - 任意进制 => 十进制 （按权展开法）

    例如：1001.01 => 1 * 2^3 + 1 * 2^0 + 1 * 2^-1
  - 十进制 => 任意进制 (短除法)

    例如：转2进制,

    15 / 2 = 7  余 1

    7 / 2 = 3   余 1

    3 / 2 = 1   余 1

    1 /2 = 1    余 1

    倒序排位（下往上）：1111

  - 二/八/十六进制互转 （括号中为补位）

    2 => 8 (右-> 左，3个一组)

    例如： (0)10 001 110 => 216

    2 => 16 (右-> 左，4个一组)

    例如：1000 1110 => 8E

    8 => 16 ,或 16 =>8 ,都是先转为2进制，再转为所需要的进制

#### 2.03 原/反/补/移码

  > 注：最高位为符号位

  - 数 转 2进制， 用1个字节，8bit表示，不足的搞位0表示补足8位

  - 正数：符号位为1，原/反/补码 相同

  - 负数：符号位为0，反码为原码（符号位不变，剩余取反）、补码为反码 + 1

  - 移码：补码的首位取反即为移码，常作为浮点数运算的阶码

  - 1个字节，8bit表示的原/反/补码，若n=8

    原/反码：-(2^(n-1) - 1) ~ 2^(n-1) - 1, 范围: -127 ~ 127

    补码：-2^(n-1) ~ 2^(n-1) - 1, 范围: -128 ~ 128

  #### 2.04 浮点数运算
    > N = M * (R^e), M尾数， R基数, e指数
    对阶 => 尾数计算 => 格式化（小数点左侧有且不能为0且仅一位）

  ## 2.05 计算机结构
    主机：cpu(运算器与控制器)、主存储器

    运算器：算术逻辑单元ALU、累加寄存器AC、数据缓冲寄存器DR、状态条件寄存器PSW

    控制器：程序计数器PC、指令寄存器IR、指令译码器、时序部件

  ## 2.06 Flynn分类法

  > 指令流: 机器执行的指令序列

  > 数据流: 指令调用的数据序列，包括输入数据和中间结果

  > 按照指令和数据流不同的组织方式，计算机系统可分为四类：

  ```
  单指令流单数据流SISD: 控制器 1个、处理器 1个、主存模块 1个； 单处理器系统（代表386,486,586，单片机）

  单指令流多据流SIMD  : 控制器 1个、处理器 多个、主存模块 多个； 各处理器以同步的形式执行同一条命令；并行处理机、阵列处理机、超级向量处理机

  多指令流单数据流MISD: 控制器 多个、处理器 1个、主存模块 多个； 被证明不切实际；目前没有，文献成为流水线计算机

  多指令流多据流MIMD  : 控制器 多个、处理器 多个、主存模块 多个； 能够实现作业、任务、指令等各级全面并行；多处理系统、多计算机
  ```

  ## 2.07 CISC与RISC指令集

  > CISC(复杂)：数量多,使用频率差别大，可变长格式；寻址:多种；实现方式：微程序控制技术； 其他：研制周期长

  > RISC(精简)：数量少,使用频率接近，定长格式，操作寄存器，只有load/store操作内存；寻址:少；实现方式：增加了通用寄存器，硬不限逻辑控制为主，适合采用流水线；其他： 优化编译，有效支持高级语言

  ## 流水线技术 (必考计算问题，执行时长)

  ### 2.08 流水线概念

  > 流水线: 在程序执行多条指令重叠进行操作的一种准并行处理实现技术。各部件同时处理是针对不同指令而言的，他们可同时为多条指令的不同部分进行工作，以提高部件的利用率和指令的平均执行速度。

  > 操作流程：取指 -> 分析 -> 执行 同时并行处理

  ### 2.09  流水线周期及流水线执行时间计算

  * 流水线周期为执行时间最长的一段

  * 流水线计算公式为：

    > k 为步骤数，n指令条数

    a: 1条执行时间 + （指令条数 - 1）* 流水线周期 （优先方法）

    b：时间公式：(k + n - 1) * 流水线周期 （其次方法）

  ### 2.10 流水线吞吐率计算

    流水线吞吐率(TP)：指在单位时间内流水线所完成的任务数量或输出的结果数量。

    流水线吞吐率的最基本的公式如下： Tp = 指令条数 / 流水线执行时间

    流水线最大吞吐率：TPmax = 1 / 流水线周期

  ### 2.11 流水线加速比计算

    流水线加速比: 完成同样一批任务，不使用流水线所用的时间与使用流水线所用的时间之比

    流水线加速比的基本公式如下： S = 不使用流水线执行时间 / 使用流水线执行时间

    流水线效率：流水线的设备利用率。在时空图上，流水线的效率定义为n个任务占用的时空区与k个流水段总的时间区之比

    流水线效率的公式： E = n个任务占用的时空区 / K个流水段的总的时空区

  ## 计算机存储系统

  ### 2.12 层次化存储结构

    快       cpu ----------- 寄存器

            cache ---------- 按内容存取(高速缓存)，单位：k, M
    ↑(速度)
            内存(主存)------- 单位：G

    慢       外存(辅存)------- 硬盘、光盘、u盘等

  ### 2.13 Cache的基本概念

  > 功能：提高CPU数据输入输出的速率，突破 冯.诺依曼瓶颈。即CPU与存储系统间数据传送宽带限制

  > 在计算机的存储系统体系中，Cache是访问速度最快的层次（寄存器 > cache）

  > 使用Cache改善系统性能的依据是程序的局部性原理

  读操作，计算'Cache + 主存储器'的系统的平均周期为t3, 计算公式如下：


  > 注：h代表对Cache的命中访问率；1 - h称为失效率(未命中率)；
    ；t1表示Cache的周期时间，t2表示主存储器周期时间

    t3 = h * t1 + (1 - h) * t2

  ### 2.14 时间局部性与空间局部性(局部性原理)

    时间局部性

    空间局部性

    工作集理论：进程运行是频繁访问的页面集合

  ### 2.15 主存(`重考点`：分类, 编址)

  > 主存分为2类： 随机存储器与只读存储器

  随机存储器：RAM 分为 DRAM(动态)、SRAM(静态)

  只读存储器: ROM 分为 MROM(掩模式)、PROM(一次可编程)、EPROM(可擦除)、flash memory(闪存)

  > 编址

  ### 2.16 磁盘工作原理

  磁盘结构和参数： 磁道、扇区

  > 寻道时间: 磁头移动到磁道所需的时间

  > 等待时间：为等待读写的扇区转到磁头下方所用的时间

  计算存取时间 = 寻道时间 + 等待时间(平均定位时间 + 转动延迟)

   > 磁盘处理记录时间：读取时间，处理时间，最长时间需要加上磁盘的旋转时间, 最短时间则不需要

  ## 总线系统

  ### 2.17 计算机总线

  > 分类: 内部总线(芯片)、系统总线(插件板)、外部总线(外部设备级别)

  系统总线：数据总线、地址总线、控制总线

  ## 可靠性

  ### 2.18 串联系统与并联系统可靠度计算

  串联系统：

  > 可靠性计算：R = R1 * R1 * R2 *...Rn 失效率：λ = λ1 + R1 + R2 +...Rn, 其中失效率也可以如下计算：λ = 1 - R

  并联系统：

  > 可靠性计算：R = 1- (1 - R1) * (1 - R2) *...(1 - Rn) 失效率：λ = 1 - R

  系统可靠性分析-模冗余系统与混合系统(表决器)

  ## 校验码

  ### 2.19 校验码的概念

  > 差错控制：CRC与海明校验码

  > 码距：一个编码系统的码距是整个编码系统中任意(所有)两个码字的最小距离

  检测e个错误码：要求最小码距d 满足d >= e + 1

  纠正t个五码：要求最小码距d 满足 d >= 2t + 1

  ### 2.20 循环校验码（CRC）

  > 可以检错，不能纠错

  > 模二除法(异或处理)

  ### 2.21 海明校验码(`频率高，比较难`)

  > 求校验码公式： 2 ^ r = x + r + 1, 其中 x, 代表信息的位数
