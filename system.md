# 操作系统原理

*上午 5-7分*

## 3.01 概述

↑ 应用程序

↑ 语言处理程序

↑ 操作系统:

  > 管理系统的硬件、软件、数据资源；控制程序运行；人机之间的接口；应用软件与硬件之间的接口

  * 进程管理 *进程的状态；`前趋图；PV操作`；死锁问题*

  * 存储管理 *`段页式存储；`页面置换算法*

  * 文件管理 *索引文件； `位示图`*

  * 作业管理

  * 设备管理 *虚设备与SPOOLING技术*

↑ 计算机硬件(硬件)

## 进程管理

### 3.02 进程状态

         运行

调度↗↙ 时间片到       ↘ 等待某个事件

  就绪        ←         等待
        等待事件发生


           等待事件发生
静止就绪 <----------------------- 静止阻塞

                ↖
挂  恢复/
起↑↓激活           运行              恢复/↑↓挂起
                                    激活


      调度↗↙时间片到           ↘等待某个事件



活跃就绪 <------------------------ 活跃阻塞
             等待事件发生


### 3.03 前趋图 (考试重点，经常与PV操作结合考)

> 执行多个任务的先后次序(类似并联串联)，实例：包饺子，

### 3.04 进程的同步与互斥

> 互斥: 同一个时刻，只允许一个某一个进程去使用资源

> 同步：一起出发，速度有差异，在一定情况下等待

### 3.05 PV操作(难点)

> 临界资源：诸进程间需要互斥方式对其进行共享的资源，如打印机、磁带机

> 临界区：每个进程中访问临界资源的那段代码

> 信号量：一种特殊的变量




### 3.06 PV操作练习

> 找习题自己练习

### 3.07 PV操作与前趋图

### 3.09 死锁问题

> 相互等待资源

公式：(n - 1) * k + 1 ,其中k是进程，n是执行进程需要的资源数

死锁条件：互斥、保持等待、不剥夺、环路等待

防御： 打破4大条件

避免：

* 有序资源分配发

* 银行家算法

### 3.10 银行家算法

> 分配资源的原则

* 一个进程多资源的最大需求不超过系统中资源数时

* 进程可以分期请求资源，但请求的总数量不能超过最大需求量

* 当系统中现有的资源不能满足进程上需资源数时，对进程的请求可以退成分配，但总能是进程在有限的时间里得到资源

主要考点是计算是进程执行顺序

### 3.11 分区存储组织

分配方法：首次适应法（第一块区域）
         最佳适应法 （与之接近大小的区域）：内存碎块多，无法分割给别的程序使用
         最差适应法：（从最大块中切割）
         循环首次适应算法：

### 3.12 页式存储、段式存储

页式存储：*逻辑地址与物理地址之间的转换, 2者页内地址相同*

逻辑地址：页号 + 页内地址

物理地址：

高级语言程序使用逻辑地址；

运行状态，内存中使用物理地址；

优点：内容利用率高，虽偏小，分配以及管理简单

缺点：增加了系统开销；可能产生抖动现象

段式存储地址：

优点：多道程序共享内存，各段程序修改互不影响

缺点：内存利用率低， 内存碎片大

段页式存储：

### 3.13 页面淘汰算法

页面置换算法

* 最优（OPT）算法

*  随机（RAND）算法

* 先进先出（FIFO）算法， 有可能产生“抖动”

* 最近最少使用（LRU）算法, 不会抖动

### 3.14 页面淘汰算法练习

* 完成页面淘汰算法习题（见截图）

### 3.15 索引文件结构

### 3.16 树形目录结构

### 3.17 位示图法

### 3.18 数据控制传输方式

### 3.19 虚设备与Spooling技术

### 3.20 微内核操作系统
